---
title: Basket
description: 
published: true
date: 2024-02-16T12:24:34.058Z
tags: 
editor: markdown
dateCreated: 2024-02-16T08:23:51.775Z
---

# Корзина
Корзина - это организация списка в виде карточек (не в виде таблицы) с обработкой изменения количества и удаления, как в приложениях интернет-магазинов. Корзину можно использовать для заказов, Scan&Go розницы и много чего еще. Ввиду ограничений ОС, в контейнерах корзина не доступна - она может занимать только весь экран. Поэтому ее следует разместить на экране без контейнера.

Корзина состоит из карточек и итогов внизу. В карточках доступно изменение количества дискретно и удаление. Эти действия обрабатываются на устройстве - пересчитываются итоги, меняется список + возникает событие которые можно обработать онлайн.

Карточки могут содержать 1 картинку либо, если ее нет то ее место сдвигается и остаются поля. Полей может быть сколько угодно. Они состоят из пар «Заголовок»-«Значение», но заголовка опять же может не быть. При этом можно менять размер и цвет текста, а в самих полях писать HTML-текст.
Принцип работы с корзиной такой: структура корзины - это карточки и итоги. Карточки - это JSON - массив. Сначала например можно описать пустую корзину, это будет пустой массив, а также описанный формат итогов. В итогах задается:
> - заголовки итогов
> - по каким переменным карточек их считать (у карточки есть видимые поля, а есть невидимые - они нужны например для дальнейшей обработки состава корзины и для подсчета итогов) а также формат текста и округление

```json
{
"cart": [],
"totals": [
  {
    "caption": "Итого:",
    "var": "sum"
  },
  {
    "caption": "Экономия:",
    "var": "discount"
  }
]
}
```
За формат текста отвечает поле **format** (например «0.0» - один знак после запятой), за цвет и размер **size**, **color** (для значений) и **caption_size**, **caption_color** (для заголовков).
Для добавления в корзину карточек (это можно прописать например при сканировании) в массив «cart» добавляется новый JSON объект. Это карточка. Она может содержать следующие поля:
> - **qty** - количество. Должно быть какое то начальное количество. Например 1
> - **picture** - base64-строка с картинкой. Лучше не слишком большие.
> - **массив items** - массив видимых текстовых данных карточки. Поля key, value - заголовок и текст (причем оба значения необязательны), цвета и размеры **size**, **color** (для значений) и **caption_size**, **caption_color** (для заголовков). Доступен html-текст
> - **массив values** - массив невидимых данных карточки. Тут могут быть числовые поля для того, чтобы рассчитать итоги (они упоминаются в totals) и просто какие то поля для дальнейшей обработки, например ссылка на номенклатуру. Структура JSON объекта не предопределённая - просто любые поля и значения.
